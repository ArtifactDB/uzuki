<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uzuki: uzuki/parse.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">uzuki
   </div>
   <div id="projectbrief">Recovering R lists faithfully from JSON</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c664783dcdac7c9daf2e38c3f2c7bfed.html">uzuki</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">parse.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Parse JSON file contents using the <b>uzuki</b> spec.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;vector&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cstdint&gt;</code><br />
<code>#include &lt;limits&gt;</code><br />
<code>#include &quot;unpack.hpp&quot;</code><br />
<code>#include &quot;Dummy.hpp&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for parse.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="parse_8hpp__incl.png" border="0" usemap="#auzuki_2parse_8hpp" alt=""/></div>
<map name="auzuki_2parse_8hpp" id="auzuki_2parse_8hpp">
<area shape="rect" title="Parse JSON file contents using the uzuki spec." alt="" coords="255,5,367,31"/>
<area shape="rect" title=" " alt="" coords="5,79,64,104"/>
<area shape="rect" title=" " alt="" coords="89,79,157,104"/>
<area shape="rect" title=" " alt="" coords="181,79,256,104"/>
<area shape="rect" title=" " alt="" coords="280,79,341,104"/>
<area shape="rect" title=" " alt="" coords="365,79,419,104"/>
<area shape="rect" title=" " alt="" coords="443,79,531,104"/>
<area shape="rect" title=" " alt="" coords="555,79,645,104"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="parse_8hpp__dep__incl.png" border="0" usemap="#auzuki_2parse_8hppdep" alt=""/></div>
<map name="auzuki_2parse_8hppdep" id="auzuki_2parse_8hppdep">
<area shape="rect" title="Parse JSON file contents using the uzuki spec." alt="" coords="12,5,124,31"/>
<area shape="rect" href="validate_8hpp.html" title="Validate JSON file contents against the uzuki spec." alt="" coords="5,79,131,104"/>
</map>
</div>
</div>
<p><a href="parse_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c8eeaa2eb4e8044b65e4a76c7351f42"><td class="memTemplParams" colspan="2">template&lt;class Provisioner , class Json , class Externals &gt; </td></tr>
<tr class="memitem:a5c8eeaa2eb4e8044b65e4a76c7351f42"><td class="memTemplItemLeft" align="right" valign="top">std::shared_ptr&lt; Base &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="parse_8hpp.html#a5c8eeaa2eb4e8044b65e4a76c7351f42">uzuki::parse</a> (const Json &amp;contents, Externals ext)</td></tr>
<tr class="separator:a5c8eeaa2eb4e8044b65e4a76c7351f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cd97382e97f06138eef0e446bd7339"><td class="memTemplParams" colspan="2">template&lt;class Provisioner , class Json &gt; </td></tr>
<tr class="memitem:ae5cd97382e97f06138eef0e446bd7339"><td class="memTemplItemLeft" align="right" valign="top">std::shared_ptr&lt; Base &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="parse_8hpp.html#ae5cd97382e97f06138eef0e446bd7339">uzuki::parse</a> (const Json &amp;contents)</td></tr>
<tr class="separator:ae5cd97382e97f06138eef0e446bd7339"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Parse JSON file contents using the <b>uzuki</b> spec. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae5cd97382e97f06138eef0e446bd7339" name="ae5cd97382e97f06138eef0e446bd7339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cd97382e97f06138eef0e446bd7339">&#9670;&#160;</a></span>parse() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Provisioner , class Json &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; Base &gt; uzuki::parse </td>
          <td>(</td>
          <td class="paramtype">const Json &amp;&#160;</td>
          <td class="paramname"><em>contents</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Parse JSON file contents using the <b>uzuki</b> specification, assuming that there are no external references to "other" objects.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Provisioner</td><td>A class namespace defining static methods for creating new <code>Base</code> objects. </td></tr>
    <tr><td class="paramname">Json</td><td>A <a href="https://github.com/nlohmann/json"><code>nlohmann::json</code></a>-compatible representation of JSON data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contents</td><td>Parsed contents of the JSON file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the root <code>Base</code> object. Depending on <code>Provisioner</code>, this may contain references to all nested objects.</dd></dl>
<p>Any invalid representations in <code>contents</code> will cause an error to be thrown. </p>

</div>
</div>
<a id="a5c8eeaa2eb4e8044b65e4a76c7351f42" name="a5c8eeaa2eb4e8044b65e4a76c7351f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8eeaa2eb4e8044b65e4a76c7351f42">&#9670;&#160;</a></span>parse() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Provisioner , class Json , class Externals &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; Base &gt; uzuki::parse </td>
          <td>(</td>
          <td class="paramtype">const Json &amp;&#160;</td>
          <td class="paramname"><em>contents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Externals&#160;</td>
          <td class="paramname"><em>ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Parse JSON file contents using the <b>uzuki</b> specification.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Provisioner</td><td>A class namespace defining static methods for creating new <code>Base</code> objects. </td></tr>
    <tr><td class="paramname">Json</td><td>A <a href="https://github.com/nlohmann/json"><code>nlohmann::json</code></a>-compatible representation of JSON data. </td></tr>
    <tr><td class="paramname">Externals</td><td>Class describing how to resolve external references for type <code>OTHER</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">contents</td><td>Parsed contents of the JSON file. </td></tr>
    <tr><td class="paramname">ext</td><td>Instance of an external reference resolver class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the root <code>Base</code> object. Depending on <code>Provisioner</code>, this may contain references to all nested objects.</dd></dl>
<p>Any invalid representations in <code>contents</code> will cause an error to be thrown.</p>
<h1><a class="anchor" id="provisioner-contract"></a>
Provisioner requirements</h1>
<p >The <code>Provisioner</code> class is expected to provide the following static methods:</p>
<ul>
<li><code>Nothing* new_Nothing()</code>, which returns a new instance of a <code>Nothing</code> subclass.</li>
<li><code>Other* new_Other(void* p)</code>, which returns a new instance of a <code>Other</code> subclass. <code>p</code> is a pointer to an "other" object, generated by calling <code>ext.get()</code> (see below).</li>
<li><code>DataFrame* new_DataFrame(size_t r, size_t c)</code>, which returns a new instance of a <code>DataFrame</code> subclass with <code>r</code> rows and <code>c</code> columns.</li>
<li><code>UnnamedList* new_UnnamedList(size_t l)</code>, which returns a new instance of an <code>UnnamedList</code> with length <code>l</code>.</li>
<li><code>NamedList* new_UnnamedList(size_t l)</code>, which returns a new instance of a <code>NamedList</code> with length <code>l</code>.</li>
</ul>
<p >The <code>Provisioner</code> class is also expected to contain a <code>Vector</code> subclass. This <code>Provisioner::Vector</code> class should provide the following static methods:</p>
<ul>
<li><code>IntegerVector* new_Integer(size_t l)</code>, which returns a new instance of an <code>IntegerVector</code> subclass of length <code>l</code>.</li>
<li><code>NumberVector* new_Number(size_t l)</code>, which returns a new instance of a <code>NumberVector</code> subclass of length <code>l</code>.</li>
<li><code>StringVector* new_String(size_t l)</code>, which returns a new instance of a <code>StringVector</code> subclass of length <code>l</code>.</li>
<li><code>BooleanVector* new_Boolean(size_t l)</code>, which returns a new instance of a <code>BooleanVector</code> subclass of length <code>l</code>.</li>
<li><code>DateVector* new_Date(size_t l)</code>, which returns a new instance of a <code>DateVector</code> subclass of length <code>l</code>.</li>
<li><code>FactorVector* new_Factor(size_t l, size_t ll)</code>, which returns a new instance of a <code>FactorVector</code> subclass of length <code>l</code> and with <code>ll</code> unique levels.</li>
<li><code>OrderedVector* new_Ordered(size_t l, size_t ll)</code>, which returns a new instance of a <code>OrderedVector</code> subclass of length <code>l</code> and with <code>ll</code> unique levels.</li>
</ul>
<p >The <code>Provisioner</code> class is also expected to contain an <code>Array</code> subclass. This <code>Provisioner::Array</code> class should provide the following static methods:</p>
<ul>
<li><code>IntegerArray* new_Integer(std::vector&lt;size_t&gt; d)</code>, which returns a new instance of an <code>IntegerArray</code> subclass of dimensions <code>d</code>.</li>
<li><code>NumberArray* new_Number(std::vector&lt;size_t&gt; d)</code>, which returns a new instance of a <code>NumberArray</code> subclass of dimensions <code>d</code>.</li>
<li><code>StringArray* new_String(std::vector&lt;size_t&gt; d)</code>, which returns a new instance of a <code>StringArray</code> subclass of dimensions <code>d</code>.</li>
<li><code>BooleanArray* new_Boolean(std::vector&lt;size_t&gt; d)</code>, which returns a new instance of a <code>BooleanArray</code> subclass of dimensions <code>d</code>.</li>
<li><code>DateArray* new_Date(std::vector&lt;size_t&gt; d)</code>, which returns a new instance of a <code>DateArray</code> subclass of dimensions <code>d</code>.</li>
<li><code>FactorArray* new_Factor(std::vector&lt;size_t&gt; d, std::vector&lt;size_t&gt; dl)</code>, which returns a new instance of a <code>FactorArray</code> subclass of dimensions <code>d</code> and with <code>ll</code> unique levels.</li>
<li><code>OrderedArray* new_Ordered(std::vector&lt;size_t&gt; d, std::vector&lt;size_t&gt; dl)</code>, which returns a new instance of a <code>OrderedArray</code> subclass of dimensions <code>d</code> and with <code>ll</code> unique levels.</li>
</ul>
<h1><a class="anchor" id="external-contract"></a>
Externals requirements</h1>
<p >The <code>Externals</code> class is expected to provide the following <code>const</code> methods:</p>
<ul>
<li><code>void* get(size_t i)</code>, which returns a pointer to an "other" object, given the index of that object. This will be stored in the corresponding <code>Other</code> subclass generated by <code>Provisioner::new_Other</code>.</li>
<li><code>size_t size()</code>, which returns the number of available external references. </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
